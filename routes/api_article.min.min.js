"use strict";function newArticle(e,r,s){var i=e.session.userId,t=xss(e.body.data),o=JSON.parse(t);if(!i){var u="3003";return s({cood:error[u][3003],message:error[u].message},null)}if(o.personInfoId=e.session.userId,!(o.type&&o.title&&o.titleImg&&o.topicId&&o.details)){if(o.type)if(o.title)if(o.titleImg)if(o.topicId){if(!o.details)var u="3008"}else var u="3007";else var u="3006";else var u="3005";else var u="3004";return s({cood:error[u].code,message:error[u].message},null)}var n={content:JSON.stringify(o)};requestsql.request(apis.article.newarticle,n,"form",function(e,r){return s(e,r)})}var AV=require("leanengine"),moment=require("moment"),router=require("express").Router(),parseurl=require("parseurl"),session=require("express-session"),express=require("express"),xss=require("xss"),apis=require("./apis"),requestsql=require("./mysqlrequest"),error=require("./error"),users=require("./api_users"),app=express();app.use(session({secret:"keyboard cat",resave:!1,saveUninitialized:!0,cookie:{maxAge:6e4}})),requestsql.init,router.post("/getTopics",function(e,r){}),router.post("/newart",function(e,r){newArticle(e,r,function(e,s){users.ResultProcessed(r,e,s)})}),module.exports=router;