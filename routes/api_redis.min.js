"use strict";var AV=require("leanengine");var moment=require("moment");var router=require("express").Router();var redis=require("redis"),RDS_PORT=6379,RDS_HOST="127.0.1.1",RDS_PWD="foobared",RDS_OPTS={auth_pass:RDS_PWD};
var Promise_=require("bluebird");Promise_.promisifyAll(redis.RedisClient.prototype);Promise_.promisifyAll(redis.Multi.prototype);var client=Promise_.promisifyAll(redis.createClient(RDS_PORT,RDS_HOST,RDS_OPTS));
client.on("error",function(a){console.log("Error "+a);});client.on("ready",function(){console.log("准备完毕");});client.on("connect",function(){console.log("连接成功");
});router.post("/newarticle",function(b,a){redis_setget_string_async();AV.Promise.when(redis_setget_string_async()).then(function(c){console.log(c.user);
a.send(c);});});function redis_setget_string_async(){var a=new AV.Promise(function(c,b){var d=[];d[0]={username:"ssd",password:"87987"};d[1]={username:"wewqe",password:"9098"};
var e=d.toString();console.log(nb);client.hmsetAsync("beibei",e).then(function(f){return client.delAsync("article");}).then(function(f){return client.hgetallAsync("beibei");
}).then(function(f){console.log(f);c(f);});});return a;}module.exports=router;